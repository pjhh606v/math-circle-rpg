<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìˆ˜í•™ RPG â€“ ì› Â· ì›ê¸°ë‘¥ Â· ì›ë¿” Â· êµ¬ ì›”ë“œ</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #020617;
      color: #e5e7eb;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      padding: 8px 14px;
      background: #020617;
      border-bottom: 1px solid #1f2937;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    #hud {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      font-size: 13px;
    }
    .hud-item {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid #1f2937;
      background: #030712;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .hp-bar {
      width: 100px;
      height: 8px;
      border-radius: 999px;
      background: #374151;
      overflow: hidden;
      display: inline-block;
      vertical-align: middle;
      margin: 0 4px;
    }
    .hp-fill {
      width: 100%;
      height: 100%;
      background: #f97373;
      transition: width 0.15s;
    }
    main {
      flex: 1;
      padding: 16px;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }
    .card {
      width: 100%;
      max-width: 980px;
      background: #020617;
      border-radius: 18px;
      border: 1px solid #1f2937;
      padding: 20px;
      box-shadow: 0 24px 60px rgba(15,23,42,0.9);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    h1,h2,h3 { margin: 0; }
    .subtitle {
      font-size: 13px;
      color: #9ca3af;
    }
    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }
    button {
      border: none;
      border-radius: 999px;
      padding: 7px 12px;
      font-size: 13px;
      cursor: pointer;
      background: #2563eb;
      color: #f9fafb;
      transition: background 0.1s, transform 0.05s;
    }
    button:hover { background: #1d4ed8; transform: translateY(-1px); }
    button.secondary {
      background: #0f172a;
      color: #e5e7eb;
      border: 1px solid #374151;
    }
    button.secondary:hover { background: #020617; }
    button.small {
      padding: 3px 8px;
      font-size: 11px;
    }
    input[type="text"], textarea {
      width: 100%;
      background: #020617;
      border-radius: 12px;
      border: 1px solid #374151;
      padding: 7px 10px;
      color: #e5e7eb;
      font-size: 13px;
      resize: vertical;
    }
    textarea { min-height: 70px; }
    .world-map {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .world-node {
      background: #020617;
      border-radius: 14px;
      border: 1px solid #1f2937;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .world-title {
      font-size: 13px;
      font-weight: 600;
    }
    .world-status {
      font-size: 11px;
      color: #9ca3af;
    }
    .badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid #374151;
      background: #020617;
    }
    .badge.green { border-color: #10b981; color:#a7f3d0; }
    .badge.yellow { border-color: #facc15; color:#fef3c7; }
    .question-box {
      border-radius: 12px;
      border: 1px solid #374151;
      padding: 10px;
      font-size: 13px;
      line-height: 1.5;
      background: #020617;
    }
    .log {
      font-size: 11px;
      color: #9ca3af;
      max-height: 110px;
      overflow-y: auto;
      border-top: 1px solid #1f2937;
      padding-top: 6px;
    }

    .field {
      position: relative;
      width: 100%;
      max-width: 700px;
      height: 360px;
      margin-top: 6px;
      border-radius: 16px;
      border: 1px solid #111827;
      background: radial-gradient(circle at top, #0f172a, #020617);
      overflow: hidden;
    }
    .player {
      position: absolute;
      width: 26px;
      height: 26px;
      border-radius: 8px;
      background: linear-gradient(135deg,#22c55e,#059669);
      border: 2px solid #bbf7d0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
    }
    .player::after {
      content: "P";
      color:#022c22;
      font-weight: 700;
    }
    .monster {
      position: absolute;
      border-radius: 999px;
      border: 2px solid #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      color:#020617;
      transition: transform 0.1s, filter 0.1s;
    }
    .monster.easy {
      width: 32px; height: 32px;
      background: radial-gradient(circle,#bfdbfe,#60a5fa);
      border-color:#1d4ed8;
    }
    .monster.mid {
      width: 38px; height: 38px;
      background: radial-gradient(circle,#e9d5ff,#a855f7);
      border-color:#7c3aed;
    }
    .monster.hard {
      width: 44px; height: 44px;
      background: radial-gradient(circle,#fecaca,#f97373);
      border-color:#ef4444;
    }
    .monster.boss {
      width: 56px; height: 56px;
      background: radial-gradient(circle,#fef3c7,#facc15);
      border-color:#fbbf24;
      box-shadow: 0 0 20px rgba(250,204,21,0.6);
    }
    .monster.dead {
      filter: grayscale(1) brightness(0.4);
    }
    .monster-label {
      position: absolute;
      bottom: -14px;
      font-size: 10px;
      color:#e5e7eb;
      white-space: nowrap;
    }
    .hint {
      font-size: 11px;
      color:#9ca3af;
    }
  </style>
</head>
<body>
  <header>
    <div><strong>ìˆ˜í•™ RPG â€“ ì› Â· ì›ê¸°ë‘¥ Â· ì›ë¿” Â· êµ¬ ì›”ë“œ</strong></div>
    <div id="hud">
      <div class="hud-item">ë‹‰ë„¤ì„: <span id="hudName">-</span></div>
      <div class="hud-item">
        HP
        <span class="hp-bar"><span id="hpFill" class="hp-fill"></span></span>
        <span id="hpText">20/20</span>
      </div>
      <div class="hud-item">ì ìˆ˜: <span id="hudScore">0</span></div>
      <div class="hud-item">100ë‚˜ë˜: <span id="hudN100">0</span></div>
      <div class="hud-item">200ë‚˜ë˜: <span id="hudN200">0</span></div>
      <div class="hud-item">íŠ¹ë³„ ì•„ì´í…œ: <span id="hudSpecial">0</span></div>
      <div class="hud-item">
        HP ë¬¼ì•½: <span id="hudPotion">0</span>
        <button class="secondary small" onclick="usePotion()">ì‚¬ìš©</button>
      </div>
    </div>
  </header>
  <main>
    <div class="card" id="screen"></div>
  </main>

  <script>
    // ---------- ìƒíƒœ ----------
    const state = {
      name: "",
      hp: 20,
      maxHp: 20,
      score: 0,
      n100: 0,
      n200: 0,
      special: 0,
      hpPotion: 0,
      worldProgress: {},
      currentWorldId: null,
      stage: null, // 'intro' | 'map' | 'quest' | 'field' | 'battle'
      log: [],
      timerId: null,
      lastTick: null,
      player: { x: 100, y: 180, step: 14 },
      monsters: [],
      waveTemplates: null, // {easy:[], mid:[], hard:[], boss:{}}
      currentWave: null, // 'easy' | 'mid' | 'hard' | 'boss'
      battle: null // {monsterId,isBoss,tier,questions,index}
    };

    // ---------- ìœ í‹¸ ----------
    function randInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function logMsg(msg) {
      state.log.unshift(msg);
      if (state.log.length > 25) state.log.pop();
      const el = document.getElementById("logArea");
      if (el) el.innerHTML = state.log.map(x=>"â€¢ "+x).join("<br>");
    }
    function updateHUD() {
      document.getElementById("hudName").textContent = state.name || "-";
      document.getElementById("hudScore").textContent = state.score;
      document.getElementById("hudN100").textContent = state.n100;
      document.getElementById("hudN200").textContent = state.n200;
      document.getElementById("hudSpecial").textContent = state.special;
      document.getElementById("hudPotion").textContent = state.hpPotion;
      const ratio = Math.max(0, Math.min(1, state.hp/state.maxHp));
      document.getElementById("hpText").textContent = state.hp+"/"+state.maxHp;
      document.getElementById("hpFill").style.width = (ratio*100)+"%";
    }
    function resetStats() {
      state.hp = state.maxHp;
      state.score = 0;
      state.n100 = 0;
      state.n200 = 0;
      state.special = 0;
      state.hpPotion = 0;
      updateHUD();
    }
    function damage(amount, reason) {
      state.hp = Math.max(0, state.hp - amount);
      if (reason) logMsg(reason);
      updateHUD();
      if (state.hp <= 0) {
        alert("HPê°€ 0ì´ ë˜ì–´ ì›”ë“œ ë§µìœ¼ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.\níšë“í•œ ì ìˆ˜ì™€ ì•„ì´í…œì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.");
        resetStats();
        stopTimer();
        showWorldMap();
      }
    }

    function rewardNormalKill(tier) {
      const scoreByTier = {easy:1, mid:2, hard:3};
      const pts = scoreByTier[tier] || 1;
      state.score += pts;
      logMsg(`ëª¬ìŠ¤í„° ì²˜ì¹˜! +${pts}ì `);

      // ë“œë: HPë¬¼ì•½ 20%, 100ë‚˜ë˜ 20%, 200ë‚˜ë˜ 10%
      const r = Math.random();
      if (r < 0.2) {
        state.hpPotion++;
        logMsg("HP ë¬¼ì•½ì„ íšë“í–ˆìŠµë‹ˆë‹¤! (í´ë¦­í•´ì„œ ì‚¬ìš© ê°€ëŠ¥)");
      } else if (r < 0.4) {
        state.n100++;
        logMsg("100ë‚˜ë˜ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!");
      } else if (r < 0.5) {
        state.n200++;
        logMsg("200ë‚˜ë˜ë¥¼ íšë“í–ˆìŠµë‹ˆë‹¤!");
      }
      updateHUD();
    }
    function rewardBossKill() {
      state.score += 5;
      state.special++;
      logMsg("ë³´ìŠ¤ë¥¼ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤! +5ì , íŠ¹ë³„ ì•„ì´í…œì„ íšë“í–ˆìŠµë‹ˆë‹¤!");
      updateHUD();
    }

    function usePotion() {
      if (state.hpPotion <= 0) {
        alert("ì‚¬ìš©í•  HP ë¬¼ì•½ì´ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }
      if (state.hp >= state.maxHp) {
        alert("ì´ë¯¸ HPê°€ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.");
        return;
      }
      state.hpPotion--;
      state.hp = Math.min(state.maxHp, state.hp + 3);
      logMsg("HP ë¬¼ì•½ ì‚¬ìš©! HPê°€ 3 íšŒë³µë˜ì—ˆìŠµë‹ˆë‹¤.");
      updateHUD();
    }
    window.usePotion = usePotion;

    // ---------- ì›”ë“œ ë°ì´í„° ----------
    const WORLDS = [
      {
        id:"w2",
        title:"WORLD 2 â€“ ì›ì£¼ì™€ ì§€ë¦„",
        big:"ì›ì£¼ìœ¨ = ì›ì£¼ Ã· ì§€ë¦„ì´ë¼ëŠ” ê´€ê³„ëŠ” ë¬´ì—‡ì„ ê°€ëŠ¥í•˜ê²Œ í• ê¹Œ?",
        quest:[
          "ì§€ë¦„ 4, 7, 10cmì¸ ì›ì˜ ì›ì£¼ë¥¼ êµ¬í•˜ê³ , ê°ê° 'ì›ì£¼ Ã· ì§€ë¦„' ê°’ì„ ì ì–´ ë³´ì„¸ìš”.",
          "ìœ„ ê²°ê³¼ë¥¼ ë³´ê³ , ì›ì£¼ìœ¨ì´ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ì›ì£¼ = ì§€ë¦„Ã—ì›ì£¼ìœ¨, ì§€ë¦„ = ì›ì£¼Ã·ì›ì£¼ìœ¨ì˜ êµ¬ì¡°ì™€ ê´€ê³„ë¥¼ ë§ë¡œ ì„¤ëª…í•´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld2
      },
      {
        id:"w3",
        title:"WORLD 3 â€“ ì›ì˜ ë„“ì´ ì–´ë¦¼",
        big:"ì™œ ì›ì˜ ë„“ì´ëŠ” ì •í™•í•œ ê°’ë³´ë‹¤ ì–´ë¦¼ìœ¼ë¡œ ë¨¼ì € ìƒê°í•  ìˆ˜ ìˆì„ê¹Œ?",
        quest:[
          "ë°˜ì§€ë¦„ì´ 5cmì¸ ì›ì„ í•œ ë³€ì´ 10cmì¸ ì •ì‚¬ê°í˜• ì•ˆì— ë„£ì—ˆì„ ë•Œ, ì›ì˜ ë„“ì´ê°€ ì •ì‚¬ê°í˜• ë„“ì´ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì€ì§€, ì‘ì€ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ì›ì„ ì˜ê²Œ ë‚˜ëˆ„ì–´ ì§ì‚¬ê°í˜•ì²˜ëŸ¼ ë°°ì—´í•˜ëŠ” ê²ƒì´ ë„“ì´ ì–´ë¦¼ì— ë„ì›€ì´ ë˜ëŠ” ì´ìœ ë¥¼ ë§í•´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld3
      },
      {
        id:"w4",
        title:"WORLD 4 â€“ ì›ì˜ ë„“ì´ ê³µì‹",
        big:"ì›ì˜ ë„“ì´ ê³µì‹ì€ ì™œ ë°˜ì§€ë¦„Ã—ë°˜ì§€ë¦„Ã—ì›ì£¼ìœ¨ êµ¬ì¡°ì¼ê¹Œ?",
        quest:[
          "ì›ì„ ì˜ê²Œ ë‚˜ëˆ„ì–´ ë¶™ì˜€ì„ ë•Œ ì–´ë–¤ ë„í˜•ì— ê°€ê¹Œì›Œì§€ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ê·¸ ë„í˜•ì—ì„œ ê°€ë¡œì™€ ì„¸ë¡œê°€ ê°ê° ë¬´ì—‡ì— í•´ë‹¹í•˜ëŠ”ì§€ ë§í•´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld4
      },
      {
        id:"w5",
        title:"WORLD 5 â€“ ë‹¤ì–‘í•œ ëª¨ì–‘ì˜ ë„“ì´",
        big:"ë³µì¡í•œ ë„í˜•ë„ ê¸°ë³¸ ë„í˜•ì˜ êµ¬ì¡°ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆì„ê¹Œ?",
        quest:[
          "ì›ì„ í¬í•¨í•œ ë„í˜•ì„ ë„“ì´ ê³„ì‚°ì´ ì‰¬ìš´ ë„í˜•ë“¤ë¡œ ë‚˜ëˆ„ëŠ” ë°©ë²•ì„ ì˜ˆë¡œ ë“¤ì–´ ë³´ì„¸ìš”.",
          "ë„“ì´ë¥¼ êµ¬í•˜ëŠ” ìˆœì„œë¥¼ ì–´ë–»ê²Œ ì •í•˜ë©´ ì‹¤ìˆ˜ê°€ ì¤„ì–´ë“œëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld5
      },
      {
        id:"w6",
        title:"WORLD 6 â€“ ì‹¤ìƒí™œ ì† ì›ì˜ ë„“ì´(ìµœì¢… ë³´ìŠ¤)",
        big:"ì™œ ìš°ë¦¬ëŠ” ì›ì˜ ë„“ì´ë¥¼ ê³µì‹ìœ¼ë¡œ ë§Œë“¤ì–´ ì‹¤ìƒí™œì— í™œìš©í• ê¹Œ?",
        quest:[
          "ì›ì˜ ë„“ì´ë¥¼ ê³„ì‚°í•´ì•¼ í•˜ëŠ” ì‹¤ìƒí™œ ìƒí™©ì„ í•œ ê°€ì§€ ë– ì˜¬ë ¤ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ê·¸ ìƒí™©ì—ì„œ ë„“ì´ë¥¼ ì–´ë¦¼ì´ ì•„ë‹ˆë¼ ì •í™•íˆ ì•Œì•„ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ ì ì–´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld6
      },
      {
        id:"w7",
        title:"WORLD 7 â€“ ì›ê¸°ë‘¥ì˜ êµ¬ì„±ìš”ì†Œ",
        big:"ì›ê¸°ë‘¥ì€ ì–´ë–¤ í‰ë©´ë„í˜•ì´ ì–´ë–»ê²Œ ì›€ì§ì—¬ì„œ ë§Œë“¤ì–´ì§ˆê¹Œ?",
        quest:[
          "ì›ê¸°ë‘¥ì˜ ë°‘ë©´ì´ 'ì„œë¡œ í‰í–‰í•˜ê³  í•©ë™ì¸ ë‘ ì›'ì´ë¼ëŠ” ë§ì˜ ëœ»ì„ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ì˜†ë©´ì„ í¼ì³¤ì„ ë•Œ ì§ì‚¬ê°í˜•ì´ ë˜ê³ , ê·¸ ê°€ë¡œì™€ ì„¸ë¡œê°€ ë¬´ì—‡ì„ ë‚˜íƒ€ë‚´ëŠ”ì§€ ì ì–´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld7
      },
      {
        id:"w8",
        title:"WORLD 8 â€“ ì›ë¿”ì˜ êµ¬ì„±ìš”ì†Œ",
        big:"ê°™ì€ ì›ì¸ë°, ì™œ ì›ê¸°ë‘¥ì€ ë˜‘ë°”ë¥´ê³  ì›ë¿”ì€ ë¾°ì¡±í• ê¹Œ?",
        quest:[
          "ì›ë¿”ì˜ ë°‘ë©´, ì˜†ë©´, ê¼­ì§“ì ì„ ê°ê° ì–´ë–»ê²Œ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ì§€ ì ì–´ ë³´ì„¸ìš”.",
          "ì›ë¿”ì—ì„œ ëª¨ì„ ê³¼ ë†’ì´ê°€ ì„œë¡œ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld8
      },
      {
        id:"w9",
        title:"WORLD 9 â€“ êµ¬ì˜ êµ¬ì„±ìš”ì†Œ",
        big:"êµ¬ì—ëŠ” ì™œ ë°‘ë©´ì´ë‚˜ ì˜†ë©´, ê¼­ì§“ì  ê°™ì€ ê²ƒì´ ì—†ì„ê¹Œ?",
        quest:[
          "êµ¬ì˜ ì¤‘ì‹¬ê³¼ êµ¬ì˜ ë°˜ì§€ë¦„ì´ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
          "ì–´ë–¤ í‰ë©´ë„í˜•ì„ íšŒì „í•˜ë©´ êµ¬ê°€ ë˜ëŠ”ì§€, ê·¸ ì´ìœ ì™€ í•¨ê»˜ ì ì–´ ë³´ì„¸ìš”."
        ],
        monsters: waveWorld9
      }
    ];

    // ---------- ê° ì›”ë“œ ë¬¸ì œ í…œí”Œë¦¿ ----------
    function waveWorld2() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ì›ìŠ¬ë¼ì„ A",
            tier: "easy",
            makeQuestions: () => {
              const d = randInt(4, 12);
              return [{
                q: `ì§€ë¦„ì´ ${d}cmì¸ ì›ì˜ ì›ì£¼ëŠ” ì–¼ë§ˆì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(d * 3)
              }];
            }
          },
          {
            name: "ì´ˆê¸‰ ì›ìŠ¬ë¼ì„ B",
            tier: "easy",
            makeQuestions: () => {
              const r = randInt(2, 8);
              return [{
                q: `ë°˜ì§€ë¦„ì´ ${r}cmì¸ ì›ì˜ ì›ì£¼ëŠ” ì–¼ë§ˆì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(2 * r * 3)
              }];
            }
          },
          {
            name: "ì´ˆê¸‰ ì›ìŠ¬ë¼ì„ C",
            tier: "easy",
            makeQuestions: () => {
              const d = randInt(3, 9);
              const c = d * 3 + (Math.random() < 0.5 ? 0 : 1.5);
              return [{
                q: `ì–´ë–¤ ì›ì˜ ì§€ë¦„ì€ ${d}cm, ì›ì£¼ëŠ” ì•½ ${c.toFixed(1)}cmì…ë‹ˆë‹¤. ì›ì£¼Ã·ì§€ë¦„ ê°’ì€ ì•½ ì–¼ë§ˆì¸ê°€ìš”? (ì •ìˆ˜ë¡œ)`,
                a: "3"
              }];
            }
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ì›ê¸°ì‚¬ A",
            tier: "mid",
            makeQuestions: () => {
              const d = randInt(4, 12);
              const c = d * 3;
              return [{
                q: `ì›ì£¼ì˜ ê¸¸ì´ê°€ ${c}cmì¸ ì›ì˜ ì§€ë¦„ì€ ëª‡ cmì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(d)
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ì›ê¸°ì‚¬ B",
            tier: "mid",
            makeQuestions: () => {
              const d = randInt(4, 10);
              const c = d * 3;
              return [{
                q: `ì§€ë¦„ì´ ${d}cmì¸ ì›ì— ë‘˜ë ˆë¥¼ ë”°ë¼ ë¦¬ë³¸ì„ ë‘ë¥´ë ¤ê³  í•©ë‹ˆë‹¤. í•„ìš”í•œ ë¦¬ë³¸ ê¸¸ì´ëŠ” ëª‡ cmì¸ê°€ìš”? (ê²¹ì¹˜ì§€ ì•Šê²Œ í•œ ë²ˆë§Œ ë‘ë¥¸ë‹¤, ì›ì£¼ìœ¨=3)`,
                a: String(c)
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ì›ê¸°ì‚¬ C",
            tier: "mid",
            makeQuestions: () => [{
              q: "ì›ì£¼ë¥¼ ì§€ë¦„ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆë”ë‹ˆ í•­ìƒ 3ì¯¤ ë˜ëŠ” ì´ìœ ë¥¼ ìì‹ ì˜ ë§ë¡œ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ì›ë§ˆë²•ì‚¬ A",
            tier: "hard",
            makeQuestions: () => {
              const d1 = randInt(4, 8);
              const d2 = randInt(9, 14);
              const cDiff = (d2 - d1) * 3;
              return [{
                q: `ì§€ë¦„ì´ ${d1}cmì¸ ì›ê³¼ ${d2}cmì¸ ì›ì´ ìˆìŠµë‹ˆë‹¤. ë‘ ì›ì˜ ì›ì£¼ ì°¨ì´ëŠ” ëª‡ cmì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(cDiff)
              }];
            }
          },
          {
            name: "ê³ ê¸‰ ì›ë§ˆë²•ì‚¬ B",
            tier: "hard",
            makeQuestions: () => {
              const c = randInt(24, 48);
              const r = c / (2 * 3);
              return [{
                q: `ê¸¸ì´ê°€ ${c}cmì¸ ë¦¬ë³¸ìœ¼ë¡œ ê²¹ì¹˜ì§€ ì•Šê²Œ ë™ê·¸ë—ê²Œ ì›ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì´ ì›ì˜ ë°˜ì§€ë¦„ì€ ëª‡ cmì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(r)
              }];
            }
          },
          {
            name: "ê³ ê¸‰ ì›ë§ˆë²•ì‚¬ C",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì›ì£¼ìœ¨ì„ 3ìœ¼ë¡œ ì–´ë¦¼í•´ì„œ ì“°ëŠ” ê²ƒì´ ì™œ í¸ë¦¬í•œì§€, ë˜ ì–´ë–¤ ìƒí™©ì—ì„œëŠ” 3.14ë¥¼ ì“°ëŠ” ê²ƒì´ ë” ì¢‹ì€ì§€ ë¹„êµí•˜ì—¬ ì ì–´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ì›-ì§€ë¦„ ì™•",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì›ì£¼ì™€ ì§€ë¦„ì´ ë¹„ë¡€í•œë‹¤ëŠ” ë§ì˜ ì˜ë¯¸ë¥¼ 'ê´€ê³„'ë¼ëŠ” ë‹¨ì–´ë¥¼ ë„£ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì§€ë¦„ì„ 2ë°°ë¡œ í•˜ë©´ ì›ì£¼ëŠ” ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€, ì›ì£¼ìœ¨ê³¼ì˜ ê´€ê³„ë¥¼ ì¨ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì£¼ìœ¨ = ì›ì£¼ Ã· ì§€ë¦„ì´ ì›ë“¤ì„ ë¹„êµí•˜ëŠ” ë° ì™œ ì¤‘ìš”í•œì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì‹¤ìƒí™œì—ì„œ ì›ì£¼ì˜ ê¸¸ì´ë¥¼ ì•Œì•„ì•¼ í•˜ëŠ” ì˜ˆë¥¼ í•˜ë‚˜ ë“¤ê³ , ì§€ë¦„ê³¼ì˜ êµ¬ì¡°ë¥¼ ì—°ê²°í•´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì£¼ì™€ ì§€ë¦„ì˜ ê´€ê³„ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì¼ë°˜í™”í•´ ë³´ì„¸ìš”. (ë°˜ë“œì‹œ 'êµ¬ì¡°', 'ê´€ê³„' ë‹¨ì–´ í¬í•¨)", a: "*" }
          ]
        }
      };
    }

    function waveWorld3() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ë„“ì´ìŠ¬ë¼ì„ A",
            tier: "easy",
            makeQuestions: () => {
              const s = randInt(4, 10);
              return [{
                q: `í•œ ë³€ì´ ${s}cmì¸ ì •ì‚¬ê°í˜• ì•ˆì— ê¼­ ë§ê²Œ ì›ì„ ê·¸ë ¸ìŠµë‹ˆë‹¤. ì›ì˜ ë„“ì´ëŠ” ì •ì‚¬ê°í˜• ë„“ì´ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ë‚˜ìš”, ì‘ë‚˜ìš”? (í¬ë‹¤/ì‘ë‹¤)`,
                a: "ì‘ë‹¤"
              }];
            }
          },
          {
            name: "ì´ˆê¸‰ ë„“ì´ìŠ¬ë¼ì„ B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì› ì•ˆì— ê¼­ ë§ê²Œ ê·¸ë¦° ì •ì‚¬ê°í˜•ê³¼ ì›ì˜ ë„“ì´ë¥¼ ë¹„êµí•˜ë©´, ì–´ëŠ ìª½ì´ ë” ë„“ë‚˜ìš”? (ì›/ì •ì‚¬ê°í˜• ì¤‘ í•˜ë‚˜)",
              a: "ì›"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ë„“ì´ìŠ¬ë¼ì„ A",
            tier: "mid",
            makeQuestions: () => {
              const inner = randInt(20, 40);
              const outer = inner + randInt(5, 15);
              return [{
                q: `ì–´ë–¤ ì› ì•ˆì— ìˆëŠ” ë„í˜•ì˜ ë„“ì´ê°€ ì•½ ${inner}cmÂ², ì› ë°”ê¹¥ í° ë„í˜•ì˜ ë„“ì´ê°€ ì•½ ${outer}cmÂ²ì…ë‹ˆë‹¤. ì´ ì›ì˜ ë„“ì´ë¥¼ ì–´ëŠ ì •ë„ë¡œ ì–´ë¦¼í•  ìˆ˜ ìˆì„ê¹Œìš”? (ì˜ˆ: ${inner}ì™€ ${outer} ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ ëŒ€ë‹µ)`,
                a: "*"
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ë„“ì´ìŠ¬ë¼ì„ B",
            tier: "mid",
            makeQuestions: () => [{
              q: "ì •ìœ¡ê°í˜• ì—¬ëŸ¬ ê°œë¥¼ ë¶™ì—¬ ì› ë„“ì´ë¥¼ ì–´ë¦¼í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•´ ë³´ì„¸ìš”. ì •ìœ¡ê°í˜• ë„“ì´ì™€ ì› ë„“ì´ì˜ ê´€ê³„ ì¤‘ì‹¬ìœ¼ë¡œ ì ê¸°.",
              a: "*"
            }]
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ë„“ì´ìŠ¬ë¼ì„ A",
            tier: "hard",
            makeQuestions: () => {
              const r = randInt(3, 8);
              const bigger = 3 * r * r + randInt(3, 10);
              const smaller = 3 * r * r - randInt(3, 10);
              return [{
                q: `ë°˜ì§€ë¦„ì´ ${r}cmì¸ ì›ì˜ ë„“ì´ë¥¼ ì–´ë¦¼í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ${smaller}cmÂ²ì™€ ${bigger}cmÂ² ì¤‘ ì–´ëŠ ìª½ì´ ë” ì•Œë§ì€ ì–´ë¦¼ê°’ì¸ì§€ ê³ ë¥´ê³ , ê·¸ ì´ìœ ë¥¼ ì¨ ë³´ì„¸ìš”.`,
                a: "*"
              }];
            }
          },
          {
            name: "ê³ ê¸‰ ë„“ì´ìŠ¬ë¼ì„ B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì›ì„ ì˜ê²Œ ë‚˜ëˆ„ì–´ ì§ì‚¬ê°í˜•ì²˜ëŸ¼ ë°°ì—´í•˜ë©´ ì™œ ë„“ì´ë¥¼ ì–´ë¦¼í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ”ì§€, 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¼ëŠ” ë‹¨ì–´ë¥¼ ë„£ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ì–´ë¦¼ì˜ ëŒ€ì™•",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì–´ë¦¼ê³¼ ì •í™•í•œ ê³„ì‚°ì´ ë„“ì´ë¥¼ ì´í•´í•˜ëŠ” ë° ì„œë¡œ ì–´ë–¤ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¥¼ ê°€ì§€ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì‹¤ìƒí™œì—ì„œ ë„“ì´ë¥¼ ì–´ë¦¼í–ˆë‹¤ê°€, ë‚˜ì¤‘ì— ì •í™•íˆ ê³„ì‚°í•´ì•¼ í•˜ëŠ” ì‚¬ë¡€ë¥¼ í•˜ë‚˜ ë“¤ê³  ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì •ìœ¡ê°í˜•, ë§ˆë¦„ëª¨, ì •ì‚¬ê°í˜• ë“±ì„ ì´ìš©í•´ ì›ì˜ ë„“ì´ë¥¼ ì–´ë¦¼í•  ë•Œ ê³µí†µìœ¼ë¡œ ì´ìš©ë˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì–´ë¦¼ê°’ì´ ë„ˆë¬´ ì‘ê±°ë‚˜ ë„ˆë¬´ í¬ê²Œ ë‚˜ì˜¤ì§€ ì•Šë„ë¡ í•˜ë ¤ë©´ ì–´ë–¤ ê¸°ì¤€ì´ í•„ìš”í• ì§€ ì¨ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì–´ë¦¼ì„ í†µí•´ ì› ë„“ì´ ê³µì‹ì„ ë– ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ì´ìœ ë¥¼ ìì‹ ì˜ ë§ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld4() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ê³µì‹ì •ë ¹ A",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ì˜ ë„“ì´ ê³µì‹ì— ë°˜ë“œì‹œ ë“¤ì–´ê°€ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€ìš”? (ë°˜ì§€ë¦„/ì§€ë¦„/ì›ì£¼ ì¤‘ í•˜ë‚˜)",
              a: "ë°˜ì§€ë¦„"
            }]
          },
          {
            name: "ì´ˆê¸‰ ê³µì‹ì •ë ¹ B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ë‹¤ìŒ ì¤‘ ì›ì˜ ë„“ì´ ê³µì‹ì„ ì˜¬ë°”ë¥´ê²Œ ì“´ ê²ƒì€? â‘  ë°˜ì§€ë¦„Ã—ì§€ë¦„Ã—ì›ì£¼ìœ¨ â‘¡ ë°˜ì§€ë¦„Ã—ë°˜ì§€ë¦„Ã—ì›ì£¼ìœ¨ â‘¢ ì§€ë¦„Ã—ì§€ë¦„Ã—ì›ì£¼ìœ¨",
              a: "2"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ê³µì‹ì •ë ¹ A",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(3, 8);
              return [{
                q: `ë°˜ì§€ë¦„ì´ ${r}cmì¸ ì›ì˜ ë„“ì´ëŠ” ì–¼ë§ˆì¸ê°€ìš”? (ë°˜ì§€ë¦„Ã—ë°˜ì§€ë¦„Ã—ì›ì£¼ìœ¨, ì›ì£¼ìœ¨=3)`,
                a: String(3 * r * r)
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ê³µì‹ì •ë ¹ B",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(4, 9);
              const area = 3 * r * r;
              return [{
                q: `ì–´ë–¤ ì›ì˜ ë„“ì´ê°€ ${area}cmÂ²ì…ë‹ˆë‹¤. ì´ ì›ì˜ ë°˜ì§€ë¦„ì€ ëª‡ cmì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(r)
              }];
            }
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ê³µì‹ì •ë ¹ A",
            tier: "hard",
            makeQuestions: () => [{
              q: "'ë°˜ì§€ë¦„Ã—ë°˜ì§€ë¦„Ã—ì›ì£¼ìœ¨'ì´ë¼ëŠ” êµ¬ì¡°ê°€ ë„“ì´ì™€ ì–´ë–¤ ê´€ê³„ë¥¼ ê°€ì§€ëŠ”ì§€ í•œ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ê³ ê¸‰ ê³µì‹ì •ë ¹ B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ë°˜ì§€ë¦„ì´ 2ë°°ê°€ ë˜ë©´ ì›ì˜ ë„“ì´ëŠ” ëª‡ ë°°ê°€ ë˜ëŠ”ì§€, ê³µì‹ì„ ì´ìš©í•´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ê³µì‹ì˜ ì™•",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì›ì˜ ë„“ì´ ê³µì‹ì„ ëª¨ë¥¼ ë•Œì™€ ì•Œ ë•Œì˜ ì°¨ì´ë¥¼ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¼ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì˜ ë„“ì´ ê³µì‹ì„ ì´ìš©í•´ ê³„ì‚°ì„ ê°„ë‹¨í•˜ê²Œ ë§Œë“œëŠ” ì˜ˆë¥¼ í•œ ê°€ì§€ ë“¤ì–´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì› ë„“ì´ ê³µì‹ì„ ë‹¤ë¥¸ ë„í˜•(ì˜ˆ: ì§ì‚¬ê°í˜•) ë„“ì´ ê³µì‹ê³¼ ë¹„êµí•´ ë¹„ìŠ·í•œ ì ê³¼ ë‹¤ë¥¸ ì ì„ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "'ê³µì‹'ì´ ìˆë‹¤ëŠ” ê²ƒì´ ì‚¬ê³  ê³¼ì •ì— ì£¼ëŠ” ì¥ì ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì˜ ë„“ì´ ê³µì‹ì—ì„œ ë°˜ì§€ë¦„ì´ ë‘ ë²ˆ ê³±í•´ì§€ëŠ” ì´ìœ ë¥¼ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld5() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ë³µí•©ë„í˜•ìŠ¬ë¼ì„ A",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì§ì‚¬ê°í˜•ê³¼ ì›ì´ í•¨ê»˜ ìˆì„ ë•Œ, ë„“ì´ë¥¼ êµ¬í•˜ëŠ” ì²« ë‹¨ê³„ë¡œ ì•Œë§ì€ ê²ƒì€? â‘  ëª¨ë‘ í•œêº¼ë²ˆì— ë”í•œë‹¤ â‘¡ ë‚˜ëˆ„ì–´ ìƒê°í•œë‹¤ â‘¢ ì•„ë¬´ ë„í˜•ì´ë‚˜ ê³¨ë¼ì„œ ê³„ì‚°í•œë‹¤",
              a: "2"
            }]
          },
          {
            name: "ì´ˆê¸‰ ë³µí•©ë„í˜•ìŠ¬ë¼ì„ B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ë³µí•© ë„í˜•ì˜ ë„“ì´ë¥¼ êµ¬í•  ë•Œ 'ë‚˜ëˆˆ ë’¤ ë”í•˜ê±°ë‚˜ ë¹¼ëŠ”' ì´ìœ ë¥¼ ì§§ê²Œ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ë³µí•©ë„í˜•ê¸°ì‚¬ A",
            tier: "mid",
            makeQuestions: () => {
              const a = randInt(6, 12);
              const b = randInt(4, 8);
              const r = randInt(2, 5);
              const rect = a * b;
              const circle = 3 * r * r;
              return [{
                q: `ê°€ë¡œ ${a}cm, ì„¸ë¡œ ${b}cmì¸ ì§ì‚¬ê°í˜• ì•ˆì— ë°˜ì§€ë¦„ ${r}cmì¸ ì› í•˜ë‚˜ë¥¼ ì˜¤ë ¤ëƒˆìŠµë‹ˆë‹¤. ë‚¨ì€ ë„“ì´ëŠ” ëª‡ cmÂ²ì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(rect - circle)
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ë³µí•©ë„í˜•ê¸°ì‚¬ B",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(2, 5);
              const rect = randInt(20, 40);
              const circle = 3 * r * r;
              return [{
                q: `ì–´ë–¤ ë„í˜•ì˜ ë„“ì´ê°€ ${rect}cmÂ²ì´ê³ , ê·¸ ì•ˆì— ë°˜ì§€ë¦„ ${r}cmì¸ ì›ì´ í•˜ë‚˜ ê·¸ë ¤ì ¸ ìˆìŠµë‹ˆë‹¤. ì „ì²´ ë„“ì´ëŠ” ${rect + circle}cmÂ²ì…ë‹ˆë‹¤. ì›ì˜ ë„“ì´ëŠ” ëª‡ cmÂ²ì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(circle)
              }];
            }
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ë³µí•©ë„í˜•ê¸°ì‚¬ A",
            tier: "hard",
            makeQuestions: () => [{
              q: "ë³µí•© ë„í˜• ë„“ì´ë¥¼ êµ¬í•  ë•Œ, ë„í˜•ì„ ì–´ë–»ê²Œ ë°”ë¼ë³´ëŠ” 'êµ¬ì¡°ì ì¸ ì‹œê°'ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•˜ë‚˜ìš”? í•œ ë¬¸ì¥ìœ¼ë¡œ ì¨ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ê³ ê¸‰ ë³µí•©ë„í˜•ê¸°ì‚¬ B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ë³µí•© ë„í˜• ë¬¸ì œì—ì„œ ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜(ì˜ˆ: ë¹¼ì•¼ í•  ë„“ì´ë¥¼ ë”í•˜ëŠ” ê²ƒ ë“±)ë¥¼ í•˜ë‚˜ ë– ì˜¬ë¦¬ê³ , ì™œ ê·¸ëŸ° ì‹¤ìˆ˜ê°€ ìƒê¸°ëŠ”ì§€ ì¨ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ë³µí•© ë„í˜•ì˜ êµ°ì£¼",
          tier: "boss",
          makeQuestions: () => [
            { q: "'ì‚¬ê°í˜•ê³¼ ì›ì„ ë‚˜ëˆ„ê³ , ë„“ì´ë¥¼ ë”í•˜ê±°ë‚˜ ë¹¼ëŠ” êµ¬ì¡°'ë¥¼ 'ê´€ê³„'ë¼ëŠ” ë§ê³¼ í•¨ê»˜ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ë³µí•© ë„í˜•ì„ ë‚˜ëˆŒ ë•Œ ê¸°ì¤€ì´ ë˜ëŠ” ì„ ì´ë‚˜ ì ì„ ì–´ë–»ê²Œ ì •í•´ì•¼ í•˜ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ë³µí•© ë„í˜• ë„“ì´ ê³„ì‚° ê³¼ì •ì´ ì•Œê³  ë³´ë©´ ì–´ë–¤ 'êµ¬ì¡°'ë¡œ ë°˜ë³µë˜ëŠ”ì§€ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ë³µí•© ë„í˜•ì„ í†µí•´ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¥¼ ë³´ëŠ” ëˆˆì´ ì–´ë–»ê²Œ ê¸¸ëŸ¬ì§€ëŠ”ì§€ ì„œìˆ í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì‹¤ìƒí™œì—ì„œ ë³µí•© ë„í˜• ë„“ì´ë¥¼ êµ¬í•´ì•¼ í•˜ëŠ” ìƒí™©ì„ í•œ ê°€ì§€ ë“¤ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld6() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì A",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ì´ ë“±ì¥í•˜ëŠ” ì‹¤ìƒí™œ ë¬¼ê±´ì„ í•˜ë‚˜ ì ì–´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ì´ˆê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ì´ ì“°ì´ëŠ” ì¥ì†Œë¥¼ í•˜ë‚˜ ë– ì˜¬ë ¤ ë³´ì„¸ìš”. (ì˜ˆ: ìš´ë™ì¥, ì‹œê³„ ë“±) ê·¸ ì´ë¦„ì„ ì ìœ¼ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì A",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(4, 10);
              return [{
                q: `ë°˜ì§€ë¦„ì´ ${r}mì¸ ì›í˜• í™”ë‹¨ì— ì”ë””ë¥¼ ê¹”ë ¤ í•©ë‹ˆë‹¤. í•„ìš”í•œ ë„“ì´ëŠ” ëª‡ mÂ²ì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(3 * r * r)
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì B",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(3, 7);
              return [{
                q: `ë°˜ì§€ë¦„ì´ ${r}mì¸ ì›í˜• ì—°ëª»ì˜ ë°”ë‹¥ì— ë°©ìˆ˜í¬ë¥¼ ê¹”ë ¤ê³  í•©ë‹ˆë‹¤. í•„ìš”í•œ ë°©ìˆ˜í¬ ë„“ì´ëŠ” ëª‡ mÂ²ì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(3 * r * r)
              }];
            }
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì A",
            tier: "hard",
            makeQuestions: () => [{
              q: "ë„“ì´ë¥¼ ì–´ë¦¼í•˜ëŠ” ê²ƒê³¼ ì •í™•íˆ ê³„ì‚°í•˜ëŠ” ê²ƒì´ ì‹¤ìƒí™œì—ì„œ ì–´ë–»ê²Œ í•¨ê»˜ ì“°ì¼ ìˆ˜ ìˆëŠ”ì§€ ì˜ˆë¥¼ ë“¤ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ê³ ê¸‰ ì‹¤ìƒí™œìˆ˜í˜¸ì B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì‹¤ìƒí™œì—ì„œ ì›ì˜ ë„“ì´ë¥¼ ë„ˆë¬´ ì‘ê²Œ ì–´ë¦¼í–ˆì„ ë•Œ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ìƒìƒí•´ ì¨ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ìµœì¢… ì›ì˜ êµ°ì£¼",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì›ì´ë€, ë°˜ì§€ë¦„Â·ì›ì£¼ìœ¨Â·ë„“ì´ ì‚¬ì´ì˜ êµ¬ì¡°ì™€ ê´€ê³„ë¥¼ í†µí•´ ì–´ë–¤ ì˜ë¯¸ë¥¼ ê°–ëŠ” ë„í˜•ì¸ì§€ ì„œìˆ í•´ ë³´ì„¸ìš”. (ë°˜ë“œì‹œ 'êµ¬ì¡°', 'ê´€ê³„' ë‹¨ì–´ í¬í•¨)", a: "*" },
            { q: "ì›ì˜ ë„“ì´ ê°œë…ì´ ì—†ë‹¤ë©´ ì–´ë–¤ ì‹¤ìƒí™œ ë¬¸ì œê°€ ìƒê¸¸ì§€ ìƒìƒí•´ ë³´ê³  ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì˜ ë„“ì´ ê³µì‹ì´ ì‹¤ìƒí™œì—ì„œ 'ë„êµ¬'ë¡œì„œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì‚¬ë¡€ë¥¼ ë“¤ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ì˜ ë„“ì´ë¥¼ í•™ìŠµí•˜ë©´ì„œ ëŠë‚€ ì–´ë ¤ì›€ê³¼ ê·¸ê²ƒì„ ê·¹ë³µí•œ ë°©ì‹ì„ ë˜ëŒì•„ë³´ë©° í•œ ë¬¸ë‹¨ìœ¼ë¡œ ì¨ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì› ë„“ì´ ì´í•´ê°€ ì…ì²´ë„í˜• í•™ìŠµ(ì›ê¸°ë‘¥Â·ì›ë¿”Â·êµ¬)ê³¼ ì–´ë–¤ ê´€ê³„ê°€ ìˆëŠ”ì§€ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld7() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ì›ê¸°ë‘¥ì •ë ¹ A",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ê¸°ë‘¥ì˜ ë°‘ë©´ ëª¨ì–‘ì€ ë¬´ì—‡ì¸ê°€ìš”? (ì›/ì‚¼ê°í˜•/ì‚¬ê°í˜• ì¤‘ í•˜ë‚˜)",
              a: "ì›"
            }]
          },
          {
            name: "ì´ˆê¸‰ ì›ê¸°ë‘¥ì •ë ¹ B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ê¸°ë‘¥ì˜ ë°‘ë©´ì€ ëª‡ ê°œì¸ê°€ìš”? (ìˆ«ìë¡œ ì“°ê¸°)",
              a: "2"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ì›ê¸°ë‘¥ì •ë ¹ A",
            tier: "mid",
            makeQuestions: () => {
              const r = randInt(2, 5);
              const h = randInt(5, 12);
              const circ = 2 * 3 * r;
              return [{
                q: `ì–´ë–¤ ì›ê¸°ë‘¥ì˜ ë°‘ë©´ ë°˜ì§€ë¦„ì€ ${r}cm, ë†’ì´ëŠ” ${h}cmì…ë‹ˆë‹¤. ì „ê°œë„ì—ì„œ ì˜†ë©´ ì§ì‚¬ê°í˜•ì˜ ê°€ë¡œì™€ ì„¸ë¡œëŠ” ê°ê° ëª‡ cmì¸ê°€ìš”? (ì›ì£¼ìœ¨=3, 'ê°€ë¡œ,ì„¸ë¡œ' í˜•ì‹ìœ¼ë¡œ ì“°ê¸°)`,
                a: `${circ},${h}`
              }];
            }
          },
          {
            name: "ì¤‘ê¸‰ ì›ê¸°ë‘¥ì •ë ¹ B",
            tier: "mid",
            makeQuestions: () => [{
              q: "ë‹¤ìŒ ì¤‘ ì›ê¸°ë‘¥ì— ëŒ€í•œ ì˜³ì€ ì„¤ëª…ì„ ê³¨ë¼ ë²ˆí˜¸ë§Œ ì“°ì„¸ìš”. â‘  ë°‘ë©´ì´ 1ê°œì´ë‹¤. â‘¡ ì˜†ë©´ì€ í‰í‰í•œ ë©´ì´ë‹¤. â‘¢ ìœ„ì—ì„œ ë³´ë©´ ëª¨ì–‘ì´ ì›ì´ë‹¤. â‘£ ê¼­ì§“ì ì´ ìˆë‹¤.",
              a: "3"
            }]
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ì›ê¸°ë‘¥ì •ë ¹ A",
            tier: "hard",
            makeQuestions: () => {
              const r = randInt(2, 6);
              const h = randInt(5, 10);
              const side = 2 * 3 * r * h;
              return [{
                q: `ë°‘ë©´ì˜ ë°˜ì§€ë¦„ì´ ${r}cm, ë†’ì´ê°€ ${h}cmì¸ ì›ê¸°ë‘¥ì˜ ì˜†ë©´ ì „ê°œë„ ë„“ì´ëŠ” ëª‡ cmÂ²ì¸ê°€ìš”? (ì›ì£¼ìœ¨=3)`,
                a: String(side)
              }];
            }
          },
          {
            name: "ê³ ê¸‰ ì›ê¸°ë‘¥ì •ë ¹ B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì–´ë–¤ ì „ê°œë„ì—ì„œ ë°‘ë©´ì˜ ë‘˜ë ˆì™€ ì˜†ë©´ ì§ì‚¬ê°í˜•ì˜ í•œ ë³€ ê¸¸ì´ê°€ ì„œë¡œ ë‹¤ë¥¼ ë•Œ, ì™œ ì›ê¸°ë‘¥ì„ ë§Œë“¤ ìˆ˜ ì—†ëŠ”ì§€ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¼ëŠ” ë§ì„ ì‚¬ìš©í•´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ì›ê¸°ë‘¥ì˜ êµ°ì£¼",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì›ê¸°ë‘¥ì—ì„œ ë°‘ë©´ ë‘ ê°œì™€ ì˜†ë©´ í•˜ë‚˜ê°€ ì´ë£¨ëŠ” êµ¬ì¡°ì™€ ê´€ê³„ë¥¼, ì „ê°œë„ë¥¼ ì´ìš©í•´ ì„¤ëª…í•´ ë³´ì„¸ìš”. (ë°˜ë“œì‹œ 'êµ¬ì¡°', 'ê´€ê³„' ë‹¨ì–´ í¬í•¨)", a: "*" },
            { q: "ì›ê¸°ë‘¥ì˜ ë†’ì´ì™€ ë°‘ë©´ì˜ ë°˜ì§€ë¦„ì´ ë³€í•  ë•Œ, ê²‰ë„“ì´ë‚˜ ë¶€í”¼ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§ˆì§€ êµ¬ì¡°ì ìœ¼ë¡œ ì˜ˆìƒí•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ê¸°ë‘¥ì„ ì‹¤ìƒí™œ ë¬¼ê±´(ì˜ˆ: ì»µ, í†µì¡°ë¦¼ ë“±)ê³¼ ì—°ê²°í•˜ì—¬, ì™œ ì´ëŸ° ëª¨ì–‘ì´ ë§ì´ ì“°ì´ëŠ”ì§€ ì¨ ë³´ì„¸ìš”.", a: "*" },
            { q: "ë°‘ë©´ì´ ì„œë¡œ í‰í–‰í•˜ê³  í•©ë™ì¸ ë‘ ì›ì´ë¼ëŠ” ì ì„ ê¸°ì¤€ìœ¼ë¡œ, ì›ê¸°ë‘¥ì„ ë‹¤ë¥¸ ì…ì²´ë„í˜•ê³¼ ë¹„êµí•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ê¸°ë‘¥ì˜ ì „ê°œë„ì—ì„œ ê¸¸ì´ ê´€ê³„ê°€ í‹€ë ¸ì„ ë•Œ ì–´ë–¤ ì¼ì´ ìƒê¸°ëŠ”ì§€, êµ¬ì¡°ì™€ ê´€ê³„ ê´€ì ì—ì„œ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld8() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ ì›ë¿”ìš”ì • A",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ë¿”ì˜ ë°‘ë©´ ëª¨ì–‘ì€ ë¬´ì—‡ì¸ê°€ìš”? (ì›/ì‚¬ê°í˜•/ì‚¼ê°í˜• ì¤‘ í•˜ë‚˜)",
              a: "ì›"
            }]
          },
          {
            name: "ì´ˆê¸‰ ì›ë¿”ìš”ì • B",
            tier: "easy",
            makeQuestions: () => [{
              q: "ì›ë¿”ì˜ ê¼­ì§“ì ì€ ì–´ë–¤ ì ì¸ê°€ìš”? (ì˜†ë©´ì´ ëª¨ë‘ ëª¨ì´ëŠ” í•œ ì /ë°‘ë©´ì˜ ì¤‘ì‹¬ ì¤‘ í•˜ë‚˜)",
              a: "ì˜†ë©´ì´ ëª¨ë‘ ëª¨ì´ëŠ” í•œ ì "
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ ì›ë¿”ìš”ì • A",
            tier: "mid",
            makeQuestions: () => [{
              q: "ì›ë¿”ì˜ ë°‘ë©´, ì˜†ë©´, ê¼­ì§“ì ì„ ê°ê° í•œ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ì¤‘ê¸‰ ì›ë¿”ìš”ì • B",
            tier: "mid",
            makeQuestions: () => [{
              q: "ì›ë¿”ì˜ ë°‘ë©´ ë°˜ì§€ë¦„ì´ ì»¤ì§€ë©´, ì˜†ë©´ê³¼ ê¼­ì§“ì ì˜ ëª¨ì–‘ì´ë‚˜ êµ¬ì¡°ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§ˆì§€ ì˜ˆìƒí•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ ì›ë¿”ìš”ì • A",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì›ë¿”ì—ì„œ 'ëª¨ì„ 'ê³¼ 'ë†’ì´'ì˜ ì°¨ì´ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ê³ ê¸‰ ì›ë¿”ìš”ì • B",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì›ê¸°ë‘¥ê³¼ ì›ë¿”ì„ ë¹„êµí–ˆì„ ë•Œ, ê°™ì€ ë°‘ë©´ì´ë¼ë„ êµ¬ì¡°ê°€ ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "ì›ë¿”ì˜ êµ°ì£¼",
          tier: "boss",
          makeQuestions: () => [
            { q: "ì›ë¿”ì˜ ë°‘ë©´, ì˜†ë©´, ê¼­ì§“ì , ëª¨ì„ , ë†’ì´ë¥¼ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¼ëŠ” ë§ê³¼ í•¨ê»˜ í•œ ë¬¸ë‹¨ìœ¼ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ë¿”ì˜ ì˜†ë©´ì„ ì „ê°œí•˜ë©´ ì–´ë–¤ ë„í˜•(ë¶€ì±„ê¼´)ì´ ë˜ëŠ”ì§€, ê·¸ ì´ìœ ë¥¼ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ë¿”ì˜ ëª¨ì„  ê¸¸ì´ê°€ ë†’ì´ì™€ ì–´ë–»ê²Œ ë‹¤ë¥¸ì§€ ì˜ˆë¥¼ ë“¤ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ê¸°ë‘¥ê³¼ ì›ë¿”ì˜ ë¶€í”¼ë¥¼ ë¹„êµí–ˆì„ ë•Œ, ì™œ ì›ë¿”ì˜ ë¶€í”¼ê°€ ë” ì‘ì„ì§€ êµ¬ì¡°ì ìœ¼ë¡œ ì˜ˆìƒí•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "ì›ë¿”ì„ í‰ë©´ë„í˜•(ì›)ê³¼ ì…ì²´ë„í˜• ì‚¬ì´ì˜ ê´€ê³„ë¡œ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    function waveWorld9() {
      return {
        easy: [
          {
            name: "ì´ˆê¸‰ êµ¬ì •ë ¹ A",
            tier: "easy",
            makeQuestions: () => [{
              q: "êµ¬ì—ì„œ ì¤‘ì‹¬ì€ ì–´ë–¤ ì ì¸ê°€ìš”? (í•œ ë¬¸ì¥ ë˜ëŠ” ì§§ì€ ë§ë¡œ)",
              a: "*"
            }]
          },
          {
            name: "ì´ˆê¸‰ êµ¬ì •ë ¹ B",
            tier: "easy",
            makeQuestions: () => [{
              q: "êµ¬ì—ëŠ” ë°‘ë©´ì´ ìˆì„ê¹Œìš”? (ì˜ˆ/ì•„ë‹ˆì˜¤)",
              a: "ì•„ë‹ˆì˜¤"
            }]
          }
        ],
        mid: [
          {
            name: "ì¤‘ê¸‰ êµ¬ì •ë ¹ A",
            tier: "mid",
            makeQuestions: () => [{
              q: "êµ¬ì—ì„œ ë°˜ì§€ë¦„ì€ ë¬´ì—‡ê³¼ ë¬´ì—‡ ì‚¬ì´ì˜ ê±°ë¦¬ì¸ê°€ìš”? (ì¤‘ì‹¬ê³¼ ê²‰ë©´/ë°‘ë©´ê³¼ ì˜†ë©´ ì¤‘ í•˜ë‚˜ ì ê¸°)",
              a: "ì¤‘ì‹¬ê³¼ ê²‰ë©´"
            }]
          },
          {
            name: "ì¤‘ê¸‰ êµ¬ì •ë ¹ B",
            tier: "mid",
            makeQuestions: () => [{
              q: "êµ¬ëŠ” ì–´ëŠ ë°©í–¥ì—ì„œ ë³´ì•„ë„ ëª¨ì–‘ì´ ê°™ì€ë°, ì´ê²ƒì´ ê°–ëŠ” ìˆ˜í•™ì  ì˜ë¯¸ë¥¼ ì§§ê²Œ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        hard: [
          {
            name: "ê³ ê¸‰ êµ¬ì •ë ¹ A",
            tier: "hard",
            makeQuestions: () => [{
              q: "ì–´ë–¤ í‰ë©´ë„í˜•ì„ íšŒì „ì‹œí‚¤ë©´ êµ¬ê°€ ë˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì™œ ê·¸ëŸ°ì§€ 'êµ¬ì¡°'ì™€ 'ê´€ê³„' ë‹¨ì–´ë¥¼ ë„£ì–´ ì„¤ëª…í•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          },
          {
            name: "ê³ ê¸‰ êµ¬ì •ë ¹ B",
            tier: "hard",
            makeQuestions: () => [{
              q: "êµ¬ì˜ ì¤‘ì‹¬ê³¼ ë°˜ì§€ë¦„ ê°œë…ì´ ì…ì²´ë„í˜•ì˜ ë¶€í”¼ í•™ìŠµê³¼ ì–´ë–¤ ê´€ê³„ê°€ ìˆì„ì§€ ì˜ˆìƒí•´ ë³´ì„¸ìš”.",
              a: "*"
            }]
          }
        ],
        boss: {
          name: "êµ¬ì˜ êµ°ì£¼",
          tier: "boss",
          makeQuestions: () => [
            { q: "êµ¬ì—ì„œ ë°‘ë©´Â·ì˜†ë©´ ëŒ€ì‹  ì¤‘ì‹¬ê³¼ ë°˜ì§€ë¦„ì´ ì¤‘ìš”í•œ ì´ìœ ë¥¼ 'êµ¬ì¡°'ì™€ 'ê´€ê³„'ë¼ëŠ” ë‹¨ì–´ë¥¼ ë„£ì–´ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "êµ¬ë¥¼ ë‹¤ë¥¸ ì…ì²´ë„í˜•(ì˜ˆ: ì›ê¸°ë‘¥Â·ì›ë¿”)ê³¼ ë¹„êµí–ˆì„ ë•Œ, ì–´ë–¤ ì ì—ì„œ ê°€ì¥ ë‹¨ìˆœí•œ êµ¬ì¡°ì¸ì§€ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "êµ¬ì˜ ê²‰ëª¨ìŠµì´ ì–´ëŠ ë°©í–¥ì—ì„œ ë³´ì•„ë„ ê°™ë‹¤ëŠ” ì‚¬ì‹¤ì´ ì–´ë–¤ ìˆ˜í•™ì  ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ”ì§€ ì¨ ë³´ì„¸ìš”.", a: "*" },
            { q: "êµ¬ë¥¼ ìƒì„±í•˜ëŠ” í‰ë©´ë„í˜•(ë°˜ì›)ì„ íšŒì „í•œë‹¤ëŠ” ê´€ì ì—ì„œ, íšŒì „ê³¼ ê±°ë¦¬ì˜ ê´€ê³„ë¥¼ ì„¤ëª…í•´ ë³´ì„¸ìš”.", a: "*" },
            { q: "êµ¬ì˜ ì¤‘ì‹¬ê³¼ ë°˜ì§€ë¦„ ê°œë…ì´ ì‹¤ìƒí™œ(ì˜ˆ: ê³µ, ì§€êµ¬ ëª¨í˜• ë“±)ì—ì„œ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ì •ë¦¬í•´ ë³´ì„¸ìš”.", a: "*" }
          ]
        }
      };
    }

    // ---------- íƒ€ì´ë¨¸ (í•„ë“œì—ì„œ 20ì´ˆë§ˆë‹¤ HP 2 ê°ì†Œ) ----------
    function startTimer() {
      stopTimer();
      state.lastTick = performance.now();
      state.timerId = requestAnimationFrame(timerLoop);
    }
    function stopTimer() {
      if (state.timerId) cancelAnimationFrame(state.timerId);
      state.timerId = null;
    }
    function timerLoop(now) {
      if (!state.lastTick) state.lastTick = now;
      const elapsed = now - state.lastTick;
      if (elapsed >= 20000 && state.stage === "field") {
        state.lastTick = now;
        damage(2, "ì‹œê°„ ê²½ê³¼ë¡œ ì²´ë ¥ì´ 2 ê¹ì˜€ìŠµë‹ˆë‹¤.");
      }
      if (state.timerId) state.timerId = requestAnimationFrame(timerLoop);
    }

    // ---------- ë©”ì¸ UI ----------
    const screenEl = document.getElementById("screen");

    function showIntro() {
      stopTimer();
      state.stage = "intro";
      screenEl.innerHTML = `
        <h1>ìˆ˜í•™ RPG â€“ ì› Â· ì›ê¸°ë‘¥ Â· ì›ë¿” Â· êµ¬ ì›”ë“œ</h1>
        <p class="subtitle">ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ê³  ìˆ˜í•™ ì›”ë“œë¥¼ ëª¨í—˜í•˜ì„¸ìš”.</p>
        <label>ë‹‰ë„¤ì„</label>
        <input id="nameInput" type="text" placeholder="ì˜ˆ: 6-3 ì›ë§ˆìŠ¤í„°" />
        <div class="btn-row">
          <button onclick="onStart()">ê²Œì„ ì‹œì‘</button>
        </div>
      `;
    }

    function onStart() {
      const name = document.getElementById("nameInput").value.trim();
      if (!name) { alert("ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”."); return; }
      state.name = name;
      resetStats();
      WORLDS.forEach(w=>{
        state.worldProgress[w.id] = { unlocked:true, cleared:false };
      });
      showWorldMap();
    }
    window.onStart = onStart;

    function showWorldMap() {
      stopTimer();
      state.stage = "map";
      let html = `
        <h2>ì›”ë“œ ë§µ</h2>
        <p class="subtitle">ì•„ë¬´ ì›”ë“œë‚˜ ììœ ë¡­ê²Œ ì„ íƒí•´ì„œ í”Œë ˆì´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <div class="world-map">
      `;
      WORLDS.forEach(w=>{
        const prog = state.worldProgress[w.id] || {unlocked:true, cleared:false};
        const badge = prog.cleared
          ? '<span class="badge green">âœ… í´ë¦¬ì–´</span>'
          : '<span class="badge yellow">â— ë„ì „ ê°€ëŠ¥</span>';
        html += `
          <div class="world-node">
            <div class="world-title">${w.title}</div>
            <div class="world-status">${badge}</div>
            <button class="secondary" onclick="enterWorld('${w.id}')">ì´ ì›”ë“œë¡œ ì´ë™</button>
          </div>
        `;
      });
      html += `</div><div class="log" id="logArea">${state.log.map(x=>"â€¢ "+x).join("<br>")}</div>`;
      screenEl.innerHTML = html;
    }
    window.enterWorld = function(id) {
      state.currentWorldId = id;
      const w = WORLDS.find(x=>x.id===id);
      showWorldIntro(w);
    };

    function showWorldIntro(world) {
      stopTimer();
      state.stage = "quest";
      let html = `
        <h2>${world.title}</h2>
        <p class="subtitle">BIG íƒêµ¬ ì§ˆë¬¸</p>
        <div class="question-box">${world.big}</div>
        <p class="subtitle">íƒêµ¬í€˜ìŠ¤íŠ¸ë¥¼ ëª¨ë‘ ì‘ì„±í•œ í›„ í•„ë“œë¡œ ì…ì¥í•˜ì„¸ìš”.</p>
      `;
      world.quest.forEach((q,i)=>{
        html += `
          <label>Q${i+1}. ${q}</label>
          <textarea id="quest${i}"></textarea>
        `;
      });
      html += `
        <label><input type="checkbox" id="chkTeacher" /> ì„ ìƒë‹˜ê»˜ í™•ì¸ë°›ì•˜ìŠµë‹ˆë‹¤.</label>
        <div class="btn-row">
          <button onclick="onQuestDone()">íƒêµ¬í€˜ìŠ¤íŠ¸ ì™„ë£Œ</button>
          <button class="secondary" onclick="showWorldMap()">ì›”ë“œ ë§µìœ¼ë¡œ</button>
        </div>
        <div class="log" id="logArea">${state.log.map(x=>"â€¢ "+x).join("<br>")}</div>
      `;
      screenEl.innerHTML = html;
    }

    window.onQuestDone = function() {
      const world = WORLDS.find(x=>x.id===state.currentWorldId);
      if (!document.getElementById("chkTeacher").checked) {
        alert("ì„ ìƒë‹˜ê»˜ í™•ì¸ë°›ì•˜ë‹¤ë©´ ì²´í¬í•´ ì£¼ì„¸ìš”.");
        return;
      }
      for (let i=0;i<world.quest.length;i++){
        const v = document.getElementById("quest"+i).value.trim();
        if (!v) { alert("ëª¨ë“  íƒêµ¬í€˜ìŠ¤íŠ¸ì— ë‹µì„ ì ì–´ ì£¼ì„¸ìš”."); return; }
      }
      logMsg(`${world.title} íƒêµ¬í€˜ìŠ¤íŠ¸ ì™„ë£Œ! í•„ë“œì— ì…ì¥í•©ë‹ˆë‹¤.`);
      startField(world);
    };

    // ---------- í•„ë“œ & ì›¨ì´ë¸Œ ----------
    function startField(world) {
      state.stage = "field";
      state.player.x = 100;
      state.player.y = 180;
      state.waveTemplates = world.monsters();
      startWave("easy");
    }

    function startWave(tier) {
      state.currentWave = tier;
      state.monsters = [];
      const wt = state.waveTemplates;
      let templates;
      if (tier === "boss") {
        templates = [wt.boss];
      } else {
        templates = wt[tier] || [];
      }
      const count = (tier === "boss") ? 1 : 5;
      for (let i=0;i<count;i++) {
        const t = templates[randInt(0, templates.length-1)];
        const m = {
          id: `${tier}_${i}_${Date.now()}_${Math.random()}`,
          name: t.name,
          tier: t.tier,
          template: t,
          alive: true,
          x: randInt(60, 620),
          y: randInt(40, 300)
        };
        state.monsters.push(m);
      }
      renderField();
      startTimer();
    }

    function renderField() {
      const world = WORLDS.find(x=>x.id===state.currentWorldId);
      let infoText = "";
      if (state.stage === "field") {
        infoText = "ë°©í–¥í‚¤ë¡œ ì´ë™í•˜ê³ , ëª¬ìŠ¤í„°ì— ê°€ê¹Œì´ ê°€ì„œ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ì „íˆ¬ë¥¼ ì‹œì‘í•˜ì„¸ìš”.";
      } else if (state.stage === "battle") {
        infoText = "ë¬¸ì œë¥¼ í’€ì–´ ëª¬ìŠ¤í„°ë¥¼ ì²˜ì¹˜í•˜ì„¸ìš”!";
      }

      let html = `
        <h2>${world.title}</h2>
        <p class="subtitle">${world.big}</p>
        <div class="btn-row">
          <button class="secondary" onclick="changeWave('easy')">ì´ˆê¸‰ ì‚¬ëƒ¥í„°</button>
          <button class="secondary" onclick="changeWave('mid')">ì¤‘ê¸‰ ì‚¬ëƒ¥í„°</button>
          <button class="secondary" onclick="changeWave('hard')">ê³ ê¸‰ ì‚¬ëƒ¥í„°</button>
          <button class="secondary" onclick="changeWave('boss')">ë³´ìŠ¤ ë°©</button>
          <button class="secondary" onclick="showWorldMap()">ì›”ë“œ ë§µìœ¼ë¡œ</button>
        </div>
        <p class="subtitle">${infoText}</p>
        <div class="field" id="fieldArea"></div>
      `;

      if (state.stage === "battle" && state.battle) {
        const b = state.battle;
        const q = b.questions[b.index];
        html += `
          <div class="question-box" style="margin-top:10px;">
            <strong>[ì „íˆ¬ ì¤‘] ${b.isBoss ? "ë³´ìŠ¤" : "ëª¬ìŠ¤í„°"} ë¬¸ì œ ${b.index+1}/${b.questions.length}</strong><br><br>
            ${q.q}
          </div>
          <input id="answerInput" type="text" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" />
          <div class="btn-row">
            <button onclick="submitAnswer()">ì •ë‹µ ì œì¶œ</button>
          </div>
          <p class="hint">* ìˆ«ì ë¬¸ì œëŠ” ìˆ«ìë§Œ, ì„¤ëª… ë¬¸ì œëŠ” ê°„ë‹¨í•œ ë¬¸ì¥ìœ¼ë¡œ ì ìœ¼ë©´ ë©ë‹ˆë‹¤.</p>
        `;
      } else {
        html += `<p class="hint">* ì•„ì§ ì „íˆ¬ ì¤‘ì´ ì•„ë‹™ë‹ˆë‹¤. ëª¬ìŠ¤í„°ì—ê²Œ ë‹¤ê°€ê°€ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë³´ì„¸ìš”.</p>`;
      }

      html += `<div class="log" id="logArea">${state.log.map(x=>"â€¢ "+x).join("<br>")}</div>`;
      screenEl.innerHTML = html;

      const field = document.getElementById("fieldArea");
      if (!field) return;

      // í”Œë ˆì´ì–´
      const pDiv = document.createElement("div");
      pDiv.className = "player";
      pDiv.style.left = state.player.x + "px";
      pDiv.style.top = state.player.y + "px";
      field.appendChild(pDiv);

      // ëª¬ìŠ¤í„°
      state.monsters.forEach(m=>{
        const mDiv = document.createElement("div");
        mDiv.className = "monster " + (m.tier === "boss" ? "boss" : m.tier);
        if (!m.alive) mDiv.classList.add("dead");
        mDiv.style.left = m.x + "px";
        mDiv.style.top = m.y + "px";
        const face = document.createElement("span");
        face.textContent = m.tier === "boss" ? "ğŸ˜ˆ" : "ğŸ˜º";
        mDiv.appendChild(face);
        const label = document.createElement("div");
        label.className = "monster-label";
        label.textContent = m.name;
        mDiv.appendChild(label);
        field.appendChild(mDiv);
      });
    }

    window.changeWave = function(tier) {
      if (!state.waveTemplates) return;
      startWave(tier);
      logMsg(`${tier.toUpperCase()} ì‚¬ëƒ¥í„°ì— ì…ì¥í–ˆìŠµë‹ˆë‹¤.`);
    };

    // ---------- ì „íˆ¬ ----------
    function startBattleWith(monster) {
      if (!monster.alive) {
        logMsg("ì´ë¯¸ ì“°ëŸ¬ì§„ ëª¬ìŠ¤í„°ì…ë‹ˆë‹¤.");
        return;
      }
      const qs = monster.template.makeQuestions();
      state.battle = {
        monsterId: monster.id,
        isBoss: (monster.tier === "boss"),
        tier: monster.tier,
        questions: qs,
        index: 0
      };
      state.stage = "battle";
      renderField();
      const input = document.getElementById("answerInput");
      if (input) input.focus();
    }

    window.submitAnswer = function() {
      if (!state.battle) return;
      const b = state.battle;
      const q = b.questions[b.index];
      const input = document.getElementById("answerInput");
      if (!input) return;
      const ans = input.value.trim();
      if (!ans) { alert("ì •ë‹µì„ ì…ë ¥í•´ ì£¼ì„¸ìš”."); return; }

      let correct = false;
      if (q.a === "*") {
        // ê°œë°©í˜•: ì•„ë¬´ ë§ì´ë‚˜ ì ìœ¼ë©´ ì •ë‹µ ì²˜ë¦¬
        correct = ans.length > 0;
      } else {
        if (ans === q.a) correct = true;
      }

      if (!correct) {
        damage(b.isBoss ? 3 : 2, "ì˜¤ë‹µìœ¼ë¡œ ì¸í•´ ì²´ë ¥ì´ ê¹ì˜€ìŠµë‹ˆë‹¤.");
        return;
      }

      // ì •ë‹µì¼ ë•Œ
      if (b.index < b.questions.length - 1) {
        b.index += 1;
        logMsg("ì •ë‹µ! ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.");
        renderField();
        const input2 = document.getElementById("answerInput");
        if (input2) input2.focus();
        return;
      }

      // ë§ˆì§€ë§‰ ë¬¸ì œê¹Œì§€ í•´ê²° -> ëª¬ìŠ¤í„° ì²˜ì¹˜
      const monster = state.monsters.find(m=>m.id === b.monsterId);
      if (monster) {
        monster.alive = false;
        if (b.isBoss) rewardBossKill();
        else rewardNormalKill(b.tier);
      }
      state.battle = null;
      state.stage = "field";
      logMsg("ëª¬ìŠ¤í„°ë¥¼ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤!");
      renderField();
    };

    // ---------- í‚¤ë³´ë“œ ì´ë™ & ì¶©ëŒ ----------
    document.addEventListener("keydown", (e)=>{
      if (state.stage !== "field") return;
      const step = state.player.step;
      let moved = false;
      if (e.key === "ArrowUp") { state.player.y -= step; moved = true; }
      else if (e.key === "ArrowDown") { state.player.y += step; moved = true; }
      else if (e.key === "ArrowLeft") { state.player.x -= step; moved = true; }
      else if (e.key === "ArrowRight") { state.player.x += step; moved = true; }
      else if (e.key === " ") {
        e.preventDefault();
        handleSpaceBattle();
        return;
      }

      if (moved) {
        // í•„ë“œ ë²”ìœ„ ì œí•œ
        state.player.x = Math.max(10, Math.min(650, state.player.x));
        state.player.y = Math.max(10, Math.min(320, state.player.y));
        renderField();
      }
    });

    function handleSpaceBattle() {
      if (state.monsters.length === 0) {
        logMsg("í˜„ì¬ í•„ë“œì— ëª¬ìŠ¤í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }
      let nearest = null;
      let bestDist = Infinity;
      state.monsters.forEach(m=>{
        if (!m.alive) return;
        const dx = m.x - state.player.x;
        const dy = m.y - state.player.y;
        const d = Math.sqrt(dx*dx + dy*dy);
        if (d < bestDist) {
          bestDist = d;
          nearest = m;
        }
      });
      if (!nearest || bestDist > 50) {
        logMsg("ëª¬ìŠ¤í„°ì— ë” ê°€ê¹Œì´ ê°€ì„œ ìŠ¤í˜ì´ìŠ¤ë°”ë¥¼ ëˆŒëŸ¬ ë³´ì„¸ìš”.");
        return;
      }
      startBattleWith(nearest);
    }

    // ---------- ì‹œì‘ ----------
    showIntro();
    updateHUD();
  </script>
</body>
</html>


